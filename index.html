
<!DOCTYPE html>
<html>
<head>
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>
	<div id="chart-container">
		<h1>Internet Users Over the Years</h1>
	</div>
<script>

    var width = 720;
    var height = 405;

    // d3.csv("/data/internetusers.csv", function(d) {
    d3.csv("/data/internetusers.csv", createChart);

    function createChart(d) {
        var internetUsers = {};
        internetUsers.EastAsiaPacific = []
        for (var i = 0; i < 24; i++) {
            var newItem = { year: new Date(d[i].year), users: parseInt(d[i].users) }
            internetUsers.EastAsiaPacific.push(newItem)
        }
        internetUsers.EuropeCentralAsia = []
        for (var i = 24; i < 49; i++) {
            var newItem = { year: new Date(d[i].year), users: parseInt(d[i].users) }
            internetUsers.EuropeCentralAsia.push(newItem)
        }
        internetUsers.LatinAmericaCaribbean = []
        for (var i = 49; i < 73; i++) {
            var newItem = { year: new Date(d[i].year), users: parseInt(d[i].users) }
            internetUsers.LatinAmericaCaribbean.push(newItem)
        }
        internetUsers.MiddleEastNorthAfrica = []
        for (var i = 73; i < 95; i++) {
            var newItem = { year: new Date(d[i].year), users: parseInt(d[i].users) }
            internetUsers.MiddleEastNorthAfrica.push(newItem)
        }
        internetUsers.NorthAmerica = []
        for (var i = 95; i < 121; i++) {
            var newItem = { year: new Date(d[i].year), users: parseInt(d[i].users) }
            internetUsers.NorthAmerica.push(newItem)
        }
        internetUsers.SouthAsia = []
        for (var i = 121; i < 145; i++) {
            var newItem = { year: new Date(d[i].year), users: parseInt(d[i].users) }
            internetUsers.SouthAsia.push(newItem)
        }
        internetUsers.SubSaharanAfrica = []
        for (var i = 145; i < 165; i++) {
            var newItem = { year: new Date(d[i].year), users: parseInt(d[i].users) }
            internetUsers.SubSaharanAfrica.push(newItem)
        }
        
        console.log(internetUsers)

        var margin = {top: 10, right: 40, bottom: 150, left: 60},
	            width = 940 - margin.left - margin.right,
	            height = 500 - margin.top - margin.bottom,
	            contextHeight = 50;
	            contextWidth = width * .5;
        
        var svg = d3.select("#chart-container")
			.append("svg")
			.attr("width", width + margin.left + margin.right)
			.attr("height", (height + margin.top + margin.bottom));
        
        var g = svg.append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        var path = g.append("path")
        .attr("class", "chart-area");

        var xAxisG = g.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + innerHeight + ")")
        var xAxisLabel = xAxisG.append("text")
        .style("text-anchor", "middle")
        .attr("transform", "translate(" + (innerWidth / 2) + "," + xAxisLabelOffset + ")")
        .attr("class", "label")
        .text(xAxisLabelText);

        var yAxisG = g.append("g")
        .attr("class", "y axis");
        var yAxisLabel = yAxisG.append("text")
        .style("text-anchor", "middle")
        .attr("transform", "translate(-" + yAxisLabelOffset + "," + (innerHeight / 2) + ") rotate(-90)")
        .attr("class", "label")
        .text(yAxisLabelText);

        var xScale = d3.time.scale().range([0, innerWidth]);
        var yScale = d3.scale.linear().range([innerHeight, 0]);

        

    //   var path = g.append("path")
    //     .attr("class", "chart-area")
    //     var regions = ["EastAsiaPacific",
    //                     "EuropeCentralAsia",
    //                     "LatinAmericaCaribbean",
    //                     "MiddleEastNorthAfrica0",
    //                     "NorthAmerica",
    //                     "SouthAsia",
    //                     "SubSaharanAfrica"],
    //         charts = [];
        
    //     console.log(regions)
    //     maxDataPoint = 1135598208
        // for (var i = 0; i < regions.length; i++)
        // {
        //     charts.push(new Chart({
        //         data: internetUsers[0].slice(),
        //         id: i,
        //         name: regions[i],
        //         width: width,
        //         height: height * (1 / regions.length),
        //         maxDataPoint: maxDataPoint,
        //         svg: svg,
        //         margin: margin,
        //         showBottomAxis: (i == regions.length - 1)
        //     }))
        // }
        var area = d3.area()
            .x(function(d) { return x(d.year); })
            .y1(function(d) { return y(d.users); })
            .y0(y(0));
        

    }    
        
    // });
</script>

<script>
    
// function updateViz(data)
// {
//   // Note that global variables width and height are already defined.
//   // There are also attributes with the names "width" and "height"
//   // which you will set, but those are different values.

//   // Given an array of data consisting of integers, use d3.js to do the following.

//   // Select the SVG element by its ID.
//   // Then use the general update pattern:
//   // Join the data to any existing rect elements.
//   // For each added element, append a rect element to the SVG.
//   // For each deleted element, remove the old rect.

//   // Each rect element should have the following properties
//   // set as attributes:
//   // "width" = 15
//   // "height" = 10 * the datum value
//   // "x" = index of the datum * 20
//   // "y" = (global variable height / 2.0) - (5.0 * the datum value)
//   // "tokenid" = (the datum value) * (the index of the datum) * 64
//   // "fill" of "steelblue "
//   // Note the extra space above! Sorry, this is a temporary bug.

//   // Don't forget to update the existing rect elements!
//   // That means you need to implement the general update pattern correctly.
// var join=d3.select("#viz").selectAll("rect").data(data);
// join
//     .attr("width", 15)
//     .attr("height", function(d) { return 10*d; })
//     .attr("x", function(d, i) { return 20*i; })
//     .attr("y", function(d, i) { return height/2.0 - 5.0*d; })
//     .attr("tokenid", function(d,i) { return 64*i*d; })
//     .attr("fill", "steelblue ");
// join.enter().append("rect")
//     .attr("width", 15)
//     .attr("height", function(d) { return 10*d; })
//     .attr("x", function(d, i) { return 20*i; })
//     .attr("y", function(d, i) { return height/2.0 - 5.0*d; })
//     .attr("tokenid", function(d,i) { return 64*i*d; })
//     .attr("fill", "steelblue ");
// join.exit().remove();
// }

</script>
</body>
</html>
